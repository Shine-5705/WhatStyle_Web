import{B as W}from"./chunks/index.js";import{json as Re,text as R}from"@sveltejs/kit";import{HttpError as ne,SvelteKitError as V,Redirect as G,ActionFailure as Te}from"@sveltejs/kit/internal";import{a as H,b as C,c as ce,p as pt,s as Kt,o as Yt,r as Qt,d as Le,e as er,g as tr,f as rr,h as Fe,i as nr,j as sr,k as ar}from"./chunks/internal.js";import{m as or,d as ht,a as _t,r as ir,w as Me,v as cr,b as lr,c as ur,e as dr,n as Ce,f as We,g as fr}from"./chunks/exports.js";const pr="/_svelte_kit_assets",yt=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],hr=["GET","POST","HEAD"];function Pe(e,t){const r=[];e.split(",").forEach((l,o)=>{const u=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(l);if(u){const[,i,a,d="1"]=u;r.push({type:i,subtype:a,q:+d,i:o})}}),r.sort((l,o)=>l.q!==o.q?o.q-l.q:l.subtype==="*"!=(o.subtype==="*")?l.subtype==="*"?1:-1:l.type==="*"!=(o.type==="*")?l.type==="*"?1:-1:l.i-o.i);let n,s=1/0;for(const l of t){const[o,u]=l.split("/"),i=r.findIndex(a=>(a.type===o||a.type==="*")&&(a.subtype===u||a.subtype==="*"));i!==-1&&i<s&&(n=l,s=i)}return n}function _r(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}function mt(e){return _r(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}let Be=null,xe;import("node:async_hooks").then(e=>xe=new e.AsyncLocalStorage).catch(()=>{});function Q(e,t){try{return Be=e,xe?xe.run(e,t):t()}finally{Be=null}}function yr(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function ee(e){return e instanceof ne||e instanceof V?e.status:500}function mr(e){return e instanceof V?e.text:"Internal Error"}const wt={"&":"&amp;",'"':"&quot;"},gt={"&":"&amp;","<":"&lt;"},bt="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",wr=new RegExp(`[${Object.keys(wt).join("")}]|`+bt,"g"),gr=new RegExp(`[${Object.keys(gt).join("")}]|`+bt,"g");function Ne(e,t){const r=t?wt:gt;return e.replace(t?wr:gr,s=>s.length===2?s:r[s]??`&#${s.charCodeAt(0)};`)}function $t(e,t){return R(`${t} method not allowed`,{status:405,headers:{allow:br(e).join(", ")}})}function br(e){const t=yt.filter(r=>r in e);return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function le(e,t,r){let n=e.templates.error({status:t,message:Ne(r)});return R(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function Ge(e,t,r){r=r instanceof ne?r:yr(r);const n=ee(r),s=await q(e,t,r),l=Pe(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||l==="application/json"?Re(s,{status:n}):le(t,n,s.message)}async function q(e,t,r){if(r instanceof ne)return r.body;const n=ee(r),s=mr(r);return await Q(e,()=>t.hooks.handleError({error:r,event:e,status:n,message:s}))??{message:s}}function ue(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function vt(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (${t.path}). If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function kt(e){const t={};return e.uses&&e.uses.dependencies.size>0&&(t.dependencies=Array.from(e.uses.dependencies)),e.uses&&e.uses.search_params.size>0&&(t.search_params=Array.from(e.uses.search_params)),e.uses&&e.uses.params.size>0&&(t.params=Array.from(e.uses.params)),e.uses?.parent&&(t.parent=1),e.uses?.route&&(t.route=1),e.uses?.url&&(t.url=1),t}function xt(e,t){return e._.prerendered_routes.has(t)||t.at(-1)==="/"&&e._.prerendered_routes.has(t.slice(0,-1))}async function $r(e,t,r){const n=e.request.method;let s=t[n]||t.fallback;if(n==="HEAD"&&!t.HEAD&&t.GET&&(s=t.GET),!s)return $t(t,n);const l=t.prerender??r.prerender_default;if(l&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!r.prerendering.inside_reroute&&!l){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{const o=await Q(e,()=>s(e));if(!(o instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);if(r.prerendering&&(!r.prerendering.inside_reroute||l)){const u=new Response(o.clone().body,{status:o.status,statusText:o.statusText,headers:new Headers(o.headers)});if(u.headers.set("x-sveltekit-prerender",String(l)),r.prerendering.inside_reroute&&l)u.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),r.prerendering.dependencies.set(e.url.pathname,{response:u,body:null});else return u}return o}catch(o){if(o instanceof G)return new Response(void 0,{status:o.status,headers:{location:o.location}});throw o}}function vr(e){const{method:t,headers:r}=e.request;if(yt.includes(t)&&!hr.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const n=e.request.headers.get("accept")??"*/*";return Pe(n,["*","text/html"])!=="text/html"}function Je(e){return e.filter(t=>t!=null)}const Ue="/__data.json",de=".html__data.json";function kr(e){return e.endsWith(Ue)||e.endsWith(de)}function Ie(e){return e.endsWith(".html")?e.replace(/\.html$/,de):e.replace(/\/$/,"")+Ue}function xr(e){return e.endsWith(de)?e.slice(0,-de.length)+".html":e.slice(0,-Ue.length)}const De="/__route.js";function Ar(e){return e.endsWith(De)}function At(e){return e.replace(/\/$/,"")+De}function Er(e){return e.slice(0,-De.length)}const jr={"<":"\\u003C","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"};class Y extends Error{constructor(t,r){super(t),this.name="DevalueError",this.path=r.join("")}}function K(e){return Object(e)!==e}const Sr=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Et(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Sr}function oe(e){return Object.prototype.toString.call(e).slice(8,-1)}function Or(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function J(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const l=e[s],o=Or(l);o&&(t+=e.slice(r,s)+o,r=s+1)}return`"${r===0?e:t+e.slice(r)}"`}function jt(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable)}const Rr=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Ae(e){return Rr.test(e)?"."+e:"["+JSON.stringify(e)+"]"}const ye="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",Tr=/[<\b\f\n\r\t\0\u2028\u2029]/g,Cr=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function B(e,t){const r=new Map,n=[],s=new Map;function l(a){if(typeof a=="function")throw new Y("Cannot stringify a function",n);if(!K(a)){if(r.has(a)){r.set(a,r.get(a)+1);return}if(r.set(a,1),t){const c=t(a);if(typeof c=="string"){s.set(a,c);return}}switch(oe(a)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":a.forEach((c,h)=>{n.push(`[${h}]`),l(c),n.pop()});break;case"Set":Array.from(a).forEach(l);break;case"Map":for(const[c,h]of a)n.push(`.get(${K(c)?me(c):"..."})`),l(h),n.pop();break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return;case"ArrayBuffer":return;default:if(!Et(a))throw new Y("Cannot stringify arbitrary non-POJOs",n);if(jt(a).length>0)throw new Y("Cannot stringify POJOs with symbolic keys",n);for(const c in a)n.push(Ae(c)),l(a[c]),n.pop()}}}l(e);const o=new Map;Array.from(r).filter(a=>a[1]>1).sort((a,d)=>d[1]-a[1]).forEach((a,d)=>{o.set(a[0],Pr(d))});function u(a){if(o.has(a))return o.get(a);if(K(a))return me(a);if(s.has(a))return s.get(a);const d=oe(a);switch(d){case"Number":case"String":case"Boolean":return`Object(${u(a.valueOf())})`;case"RegExp":return`new RegExp(${J(a.source)}, "${a.flags}")`;case"Date":return`new Date(${a.getTime()})`;case"Array":const c=a.map((_,y)=>y in a?u(_):""),h=a.length===0||a.length-1 in a?"":",";return`[${c.join(",")}${h}]`;case"Set":case"Map":return`new ${d}([${Array.from(a).map(u).join(",")}])`;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return`new ${d}([${a.toString()}])`;case"ArrayBuffer":return`new Uint8Array([${new Uint8Array(a).toString()}]).buffer`;default:const f=`{${Object.keys(a).map(_=>`${Ur(_)}:${u(a[_])}`).join(",")}}`;return Object.getPrototypeOf(a)===null?Object.keys(a).length>0?`Object.assign(Object.create(null),${f})`:"Object.create(null)":f}}const i=u(e);if(o.size){const a=[],d=[],c=[];return o.forEach((h,f)=>{if(a.push(h),s.has(f)){c.push(s.get(f));return}if(K(f)){c.push(me(f));return}switch(oe(f)){case"Number":case"String":case"Boolean":c.push(`Object(${u(f.valueOf())})`);break;case"RegExp":c.push(f.toString());break;case"Date":c.push(`new Date(${f.getTime()})`);break;case"Array":c.push(`Array(${f.length})`),f.forEach((_,y)=>{d.push(`${h}[${y}]=${u(_)}`)});break;case"Set":c.push("new Set"),d.push(`${h}.${Array.from(f).map(_=>`add(${u(_)})`).join(".")}`);break;case"Map":c.push("new Map"),d.push(`${h}.${Array.from(f).map(([_,y])=>`set(${u(_)}, ${u(y)})`).join(".")}`);break;default:c.push(Object.getPrototypeOf(f)===null?"Object.create(null)":"{}"),Object.keys(f).forEach(_=>{d.push(`${h}${Ir(_)}=${u(f[_])}`)})}}),d.push(`return ${i}`),`(function(${a.join(",")}){${d.join(";")}}(${c.join(",")}))`}else return i}function Pr(e){let t="";do t=ye[e%ye.length]+t,e=~~(e/ye.length)-1;while(e>=0);return Cr.test(t)?`${t}0`:t}function Nr(e){return jr[e]||e}function St(e){return e.replace(Tr,Nr)}function Ur(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:St(JSON.stringify(e))}function Ir(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${St(JSON.stringify(e))}]`}function me(e){if(typeof e=="string")return J(e);if(e===void 0)return"void 0";if(e===0&&1/e<0)return"-0";const t=String(e);return typeof e=="number"?t.replace(/^(-)?0\./,"$1."):typeof e=="bigint"?e+"n":t}function Ve(e){const t=new DataView(e);let r="";for(let n=0;n<e.byteLength;n++)r+=String.fromCharCode(t.getUint8(n));return qr(r)}const Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function qr(e){let t="";for(let r=0;r<e.length;r+=3){const n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(r)>>2,n[1]=(e.charCodeAt(r)&3)<<4,e.length>r+1&&(n[1]|=e.charCodeAt(r+1)>>4,n[2]=(e.charCodeAt(r+1)&15)<<2),e.length>r+2&&(n[2]|=e.charCodeAt(r+2)>>6,n[3]=e.charCodeAt(r+2)&63);for(let s=0;s<n.length;s++)typeof n[s]>"u"?t+="=":t+=Dr[n[s]]}return t}const Ot=-1,zr=-2,Hr=-3,Lr=-4,Fr=-5,Rt=-6;function ie(e,t){const r=[],n=new Map,s=[];if(t)for(const a of Object.getOwnPropertyNames(t))s.push({key:a,fn:t[a]});const l=[];let o=0;function u(a){if(typeof a=="function")throw new Y("Cannot stringify a function",l);if(n.has(a))return n.get(a);if(a===void 0)return Ot;if(Number.isNaN(a))return Hr;if(a===1/0)return Lr;if(a===-1/0)return Fr;if(a===0&&1/a<0)return Rt;const d=o++;n.set(a,d);for(const{key:h,fn:f}of s){const p=f(a);if(p)return r[d]=`["${h}",${u(p)}]`,d}let c="";if(K(a))c=we(a);else{const h=oe(a);switch(h){case"Number":case"String":case"Boolean":c=`["Object",${we(a)}]`;break;case"BigInt":c=`["BigInt",${a}]`;break;case"Date":c=`["Date","${!isNaN(a.getDate())?a.toISOString():""}"]`;break;case"RegExp":const{source:p,flags:_}=a;c=_?`["RegExp",${J(p)},"${_}"]`:`["RegExp",${J(p)}]`;break;case"Array":c="[";for(let y=0;y<a.length;y+=1)y>0&&(c+=","),y in a?(l.push(`[${y}]`),c+=u(a[y]),l.pop()):c+=zr;c+="]";break;case"Set":c='["Set"';for(const y of a)c+=`,${u(y)}`;c+="]";break;case"Map":c='["Map"';for(const[y,m]of a)l.push(`.get(${K(y)?we(y):"..."})`),c+=`,${u(y)},${u(m)}`,l.pop();c+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=Ve(a.buffer);c='["'+h+'","'+m+'"]';break}case"ArrayBuffer":{c=`["ArrayBuffer","${Ve(a)}"]`;break}default:if(!Et(a))throw new Y("Cannot stringify arbitrary non-POJOs",l);if(jt(a).length>0)throw new Y("Cannot stringify POJOs with symbolic keys",l);if(Object.getPrototypeOf(a)===null){c='["null"';for(const y in a)l.push(Ae(y)),c+=`,${J(y)},${u(a[y])}`,l.pop();c+="]"}else{c="{";let y=!1;for(const m in a)y&&(c+=","),y=!0,l.push(Ae(m)),c+=`${J(m)}:${u(a[m])}`,l.pop();c+="}"}}}return r[d]=c,d}const i=u(e);return i<0?`${i}`:`[${r.join(",")}]`}function we(e){const t=typeof e;return t==="string"?J(e):e instanceof String?J(e.toString()):e===void 0?Ot.toString():e===0&&1/e<0?Rt.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}function Tt(e){return Pe(e.request.headers.get("accept")??"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function Mr(e,t,r){const n=r?.actions;if(!n){const s=new V(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return te({type:"error",error:await q(e,t,s)},{status:s.status,headers:{allow:"GET"}})}Nt(n);try{const s=await Ut(e,n);return s instanceof Te?te({type:"failure",status:s.status,data:Ze(s.data,e.route.id,t.hooks.transport)}):te({type:"success",status:s?200:204,data:Ze(s,e.route.id,t.hooks.transport)})}catch(s){const l=s;return l instanceof G?Pt(l):te({type:"error",error:await q(e,t,Ct(l))},{status:ee(l)})}}function Ct(e){return e instanceof Te?new Error('Cannot "throw fail()". Use "return fail()"'):e}function Pt(e){return te({type:"redirect",status:e.status,location:e.location})}function te(e,t){return Re(e,t)}function Wr(e){return e.request.method==="POST"}async function Br(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:new V(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};Nt(r);try{const n=await Ut(e,r);return n instanceof Te?{type:"failure",status:n.status,data:n.data}:{type:"success",status:200,data:n}}catch(n){const s=n;return s instanceof G?{type:"redirect",status:s.status,location:s.location}:{type:"error",error:Ct(s)}}}function Nt(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function Ut(e,t){const r=new URL(e.request.url);let n="default";for(const l of r.searchParams)if(l[0].startsWith("/")){if(n=l[0].slice(1),n==="default")throw new Error('Cannot use reserved action name "default"');break}const s=t[n];if(!s)throw new V(404,"Not Found",`No action with name '${n}' found`);if(!mt(e.request))throw new V(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return Q(e,()=>s(e))}function Gr(e,t,r){const n=s=>{for(const l in r){const o=r[l].encode(s);if(o)return`app.decode('${l}', ${B(o,n)})`}};return It(e,s=>B(s,n),t)}function Ze(e,t,r){const n=Object.fromEntries(Object.entries(r).map(([s,l])=>[s,l.encode]));return It(e,s=>ie(s,n),t)}function It(e,t,r){try{return t(e)}catch(n){const s=n;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in s){let l=`Data returned from action inside ${r} is not serializable: ${s.message}`;throw s.path!==""&&(l+=` (data.${s.path})`),new Error(l)}throw s}}const Xe="x-sveltekit-invalidated",Ke="x-sveltekit-trailing-slash";function Jr(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}function Vr(e,t){const r=e.split(/[/\\]/),n=t.split(/[/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();let s=r.length;for(;s--;)r[s]="..";return r.concat(n).join("/")}async function qe({event:e,state:t,node:r,parent:n}){if(!r?.server)return null;let s=!0;const l={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},o=r.server.load,u=r.server.trailingSlash;if(!o)return{type:"data",data:null,uses:l,slash:u};const i=or(e.url,()=>{s&&(l.url=!0)},c=>{s&&l.search_params.add(c)});t.prerendering&&ht(i);let a=!1;const d=await Q(e,()=>o.call(null,{...e,fetch:(c,h)=>{const f=new URL(c instanceof Request?c.url:c,e.url);return W&&a&&l.dependencies.has(f.href),e.fetch(c,h)},depends:(...c)=>{for(const h of c){const{href:f}=new URL(h,e.url);l.dependencies.add(f)}},params:new Proxy(e.params,{get:(c,h)=>(W&&a&&typeof h=="string"&&l.params.has(h),s&&l.params.add(h),c[h])}),parent:async()=>(W&&a&&l.parent,s&&(l.parent=!0),n()),route:new Proxy(e.route,{get:(c,h)=>(W&&a&&typeof h=="string"&&l.route,s&&(l.route=!0),c[h])}),url:i,untrack(c){s=!1;try{return c()}finally{s=!0}}}));return a=!0,{type:"data",data:d??null,uses:l,slash:u}}async function Dt({event:e,fetched:t,node:r,parent:n,server_data_promise:s,state:l,resolve_opts:o,csr:u}){const i=await s;return r?.universal?.load?await r.universal.load.call(null,{url:e.url,params:e.params,data:i?.data??null,route:e.route,fetch:Zr(e,l,t,u,o),setHeaders:e.setHeaders,depends:()=>{},parent:n,untrack:d=>d()})??null:i?.data??null}function Zr(e,t,r,n,s){const l=async(o,u)=>{const i=o instanceof Request&&o.body?o.clone().body:null,a=o instanceof Request&&[...o.headers].length?new Headers(o.headers):u?.headers;let d=await e.fetch(o,u);const c=new URL(o instanceof Request?o.url:o,e.url),h=c.origin===e.url.origin;let f;if(h)t.prerendering&&(f={response:d,body:null},t.prerendering.dependencies.set(c.pathname,f));else if(c.protocol==="https:"||c.protocol==="http:")if((o instanceof Request?o.mode:u?.mode??"cors")==="no-cors")d=new Response("",{status:d.status,statusText:d.statusText,headers:d.headers});else{const y=d.headers.get("access-control-allow-origin");if(!y||y!==e.url.origin&&y!=="*")throw new Error(`CORS error: ${y?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}const p=new Proxy(d,{get(_,y,m){async function x($,b){const w=Number(_.status);if(isNaN(w))throw new Error(`response.status is not a number. value: "${_.status}" type: ${typeof _.status}`);r.push({url:h?c.href.slice(e.url.origin.length):c.href,method:e.request.method,request_body:o instanceof Request&&i?await Xr(i):u?.body,request_headers:a,response_body:$,response:_,is_b64:b})}if(y==="arrayBuffer")return async()=>{const $=await _.arrayBuffer();return f&&(f.body=new Uint8Array($)),$ instanceof ArrayBuffer&&await x(Jr($),!0),$};async function E(){const $=await _.text();return(!$||typeof $=="string")&&await x($,!1),f&&(f.body=$),$}return y==="text"?E:y==="json"?async()=>JSON.parse(await E()):Reflect.get(_,y,_)}});if(n){const _=d.headers.get;d.headers.get=y=>{const m=y.toLowerCase(),x=_.call(d.headers,m);if(x&&!m.startsWith("x-sveltekit-")&&!s.filterSerializedResponseHeaders(m,x))throw new Error(`Failed to get response header "${m}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return x}}return p};return(o,u)=>{const i=l(o,u);return i.catch(()=>{}),i}}async function Xr(e){let t="";const r=e.getReader(),n=new TextDecoder;for(;;){const{done:s,value:l}=await r.read();if(s)break;t+=n.decode(l)}return t}function qt(...e){let t=5381;for(const r of e)if(typeof r=="string"){let n=r.length;for(;n;)t=t*33^r.charCodeAt(--n)}else if(ArrayBuffer.isView(r)){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let s=n.length;for(;s;)t=t*33^n[--s]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const zt={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Kr=new RegExp(`[${Object.keys(zt).join("")}]`,"g");function Yr(e,t,r=!1){const n={};let s=null,l=null,o=!1;for(const[d,c]of e.response.headers)t(d,c)&&(n[d]=c),d==="cache-control"?s=c:d==="age"?l=c:d==="vary"&&c.trim()==="*"&&(o=!0);const u={status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body},i=JSON.stringify(u).replace(Kr,d=>zt[d]),a=['type="application/json"',"data-sveltekit-fetched",`data-url="${Ne(e.url,!0)}"`];if(e.is_b64&&a.push("data-b64"),e.request_headers||e.request_body){const d=[];e.request_headers&&d.push([...new Headers(e.request_headers)].join(",")),e.request_body&&d.push(e.request_body),a.push(`data-hash="${qt(...d)}"`)}if(!r&&e.method==="GET"&&s&&!o){const d=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);if(d){const c=+d[1]-+(l??"0");a.push(`data-ttl="${c}"`)}}return`<script ${a.join(" ")}>${i}<\/script>`}const P=JSON.stringify,Qr=new TextEncoder;function Ye(e){Ee[0]||en();const t=Ht.slice(0),r=tn(e);for(let s=0;s<r.length;s+=16){const l=r.subarray(s,s+16);let o,u,i,a=t[0],d=t[1],c=t[2],h=t[3],f=t[4],p=t[5],_=t[6],y=t[7];for(let m=0;m<64;m++)m<16?o=l[m]:(u=l[m+1&15],i=l[m+14&15],o=l[m&15]=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+l[m&15]+l[m+9&15]|0),o=o+y+(f>>>6^f>>>11^f>>>25^f<<26^f<<21^f<<7)+(_^f&(p^_))+Ee[m],y=_,_=p,p=f,f=h+o|0,h=c,c=d,d=a,a=o+(d&c^h&(d^c))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;t[0]=t[0]+a|0,t[1]=t[1]+d|0,t[2]=t[2]+c|0,t[3]=t[3]+h|0,t[4]=t[4]+f|0,t[5]=t[5]+p|0,t[6]=t[6]+_|0,t[7]=t[7]+y|0}const n=new Uint8Array(t.buffer);return Lt(n),Ft(n)}const Ht=new Uint32Array(8),Ee=new Uint32Array(64);function en(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let n=!0;for(let s=2;s*s<=t;s++)if(t%s===0){n=!1;break}n&&(r<8&&(Ht[r]=e(t**(1/2))),Ee[r]=e(t**(1/3)),r++)}}function Lt(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2],l=e[t+3];e[t+0]=l,e[t+1]=s,e[t+2]=n,e[t+3]=r}}function tn(e){const t=Qr.encode(e),r=t.length*8,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,Lt(s);const l=new Uint32Array(s.buffer);return l[l.length-2]=Math.floor(r/4294967296),l[l.length-1]=r,l}const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function Ft(e){const t=e.length;let r="",n;for(n=2;n<t;n+=3)r+=M[e[n-2]>>2],r+=M[(e[n-2]&3)<<4|e[n-1]>>4],r+=M[(e[n-1]&15)<<2|e[n]>>6],r+=M[e[n]&63];return n===t+1&&(r+=M[e[n-2]>>2],r+=M[(e[n-2]&3)<<4],r+="=="),n===t&&(r+=M[e[n-2]>>2],r+=M[(e[n-2]&3)<<4|e[n-1]>>4],r+=M[(e[n-1]&15)<<2],r+="="),r}const Qe=new Uint8Array(16);function rn(){return crypto.getRandomValues(Qe),Ft(Qe)}const nn=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),sn=/^(nonce|sha\d\d\d)-/;class Mt{#e;#t;#c;#l;#u;#d;#f;#p;#n;#s;#a;#o;#i;#r;#h;constructor(t,r,n){this.#e=t,this.#n=r;const s=this.#n;this.#s=[],this.#a=[],this.#o=[],this.#i=[],this.#r=[];const l=s["script-src"]||s["default-src"],o=s["script-src-elem"],u=s["style-src"]||s["default-src"],i=s["style-src-attr"],a=s["style-src-elem"],d=c=>!!c&&!c.some(h=>h==="unsafe-inline");this.#c=d(l),this.#l=d(o),this.#d=d(u),this.#f=d(i),this.#p=d(a),this.#t=this.#c||this.#l,this.#u=this.#d||this.#f||this.#p,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#u&&!this.#e,this.#h=n}add_script(t){if(!this.#t)return;const r=this.#e?`sha256-${Ye(t)}`:`nonce-${this.#h}`;this.#c&&this.#s.push(r),this.#l&&this.#a.push(r)}add_style(t){if(!this.#u)return;const r=this.#e?`sha256-${Ye(t)}`:`nonce-${this.#h}`;if(this.#d&&this.#o.push(r),this.#f&&this.#i.push(r),this.#p){const n="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",s=this.#n;s["style-src-elem"]&&!s["style-src-elem"].includes(n)&&!this.#r.includes(n)&&this.#r.push(n),r!==n&&this.#r.push(r)}}get_header(t=!1){const r=[],n={...this.#n};this.#o.length>0&&(n["style-src"]=[...n["style-src"]||n["default-src"]||[],...this.#o]),this.#i.length>0&&(n["style-src-attr"]=[...n["style-src-attr"]||[],...this.#i]),this.#r.length>0&&(n["style-src-elem"]=[...n["style-src-elem"]||[],...this.#r]),this.#s.length>0&&(n["script-src"]=[...n["script-src"]||n["default-src"]||[],...this.#s]),this.#a.length>0&&(n["script-src-elem"]=[...n["script-src-elem"]||[],...this.#a]);for(const s in n){if(t&&(s==="frame-ancestors"||s==="report-uri"||s==="sandbox"))continue;const l=n[s];if(!l)continue;const o=[s];Array.isArray(l)&&l.forEach(u=>{nn.has(u)||sn.test(u)?o.push(`'${u}'`):o.push(u)}),r.push(o.join(" "))}return r.join("; ")}}class an extends Mt{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content="${Ne(t,!0)}">`}}class on extends Mt{constructor(t,r,n){if(super(t,r,n),Object.values(r).filter(s=>!!s).length>0){const s=r["report-to"]?.length??!1,l=r["report-uri"]?.length??!1;if(!s&&!l)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class cn{nonce=rn();csp_provider;report_only_provider;constructor({mode:t,directives:r,reportOnly:n},{prerender:s}){const l=t==="hash"||t==="auto"&&s;this.csp_provider=new an(l,r,this.nonce),this.report_only_provider=new on(l,n,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function et(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),fulfil:e,reject:t}}function Wt(){const e=[et()];return{iterator:{[Symbol.asyncIterator](){return{next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}}}},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(et())},done:()=>{e[e.length-1].fulfil({done:!0})}}}function Bt(e,t,r){const n={},s=e.slice(1),l=s.filter(u=>u!==void 0);let o=0;for(let u=0;u<t.length;u+=1){const i=t[u];let a=s[u-o];if(i.chained&&i.rest&&o&&(a=s.slice(u-o,u+1).filter(d=>d).join("/"),o=0),a===void 0){i.rest&&(n[i.name]="");continue}if(!i.matcher||r[i.matcher](a)){n[i.name]=a;const d=t[u+1],c=s[u+1];d&&!d.rest&&d.optional&&c&&i.chained&&(o=0),!d&&!c&&Object.keys(n).length===l.length&&(o=0);continue}if(i.optional&&i.chained){o++;continue}return}if(!o)return n}function Gt(e,t,r){const{errors:n,layouts:s,leaf:l}=e,o=[...n,...s.map(u=>u?.[1]),l[1]].filter(u=>typeof u=="number").map(u=>`'${u}': () => ${Jt(r._.client.nodes?.[u],t)}`).join(`,
		`);return[`{
	id: ${P(e.id)}`,`errors: ${P(e.errors)}`,`layouts: ${P(e.layouts)}`,`leaf: ${P(e.leaf)}`,`nodes: {
		${o}
	}
}`].join(`,
	`)}function Jt(e,t){if(!e)return"Promise.resolve({})";if(e[0]==="/")return`import('${e}')`;if(H!=="")return`import('${H}/${e}')`;let r=Vr(t.pathname,`${C}/${e}`);return r[0]!=="."&&(r=`./${r}`),`import('${r}')`}async function ln(e,t,r){if(!r._.client.routes)return R("Server-side route resolution disabled",{status:400});let n=null,s={};const l=await r._.matchers();for(const o of r._.client.routes){const u=o.pattern.exec(e);if(!u)continue;const i=Bt(u,o.params,l);if(i){n=o,s=_t(i);break}}return Vt(n,s,t,r).response}function Vt(e,t,r,n){const s=new Headers({"content-type":"application/javascript; charset=utf-8"});if(e){const l=Gt(e,r,n),o=`${un(e,r,n)}
export const route = ${l}; export const params = ${JSON.stringify(t)};`;return{response:R(o,{headers:s}),body:o}}else return{response:R("",{headers:s}),body:""}}function un(e,t,r){const{errors:n,layouts:s,leaf:l}=e;let o="";for(const u of[...n,...s.map(i=>i?.[1]),l[1]]){if(typeof u!="number")continue;const i=r._.client.css?.[u];for(const a of i??[])o+=`'${H||C}/${a}',`}return o?`${Jt(r._.client.start,t)}.then(x => x.load_css([${o}]));`:""}const dn={...ir(!1),check:()=>!1},tt=new TextEncoder;async function re({branch:e,fetched:t,options:r,manifest:n,state:s,page_config:l,status:o,error:u=null,event:i,resolve_opts:a,action_result:d}){if(s.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:c}=n._,h=new Set(c.imports),f=new Set(c.stylesheets),p=new Set(c.fonts),_=new Set,y=new Map;let m;const x=d?.type==="success"||d?.type==="failure"?d.data??null:null;let E=C,$=H,b=P(C);if(s.prerendering?.fallback?r.hash_routing&&(b="new URL('.', location).pathname.slice(0, -1)"):(E=i.url.pathname.slice(C.length).split("/").slice(2).map(()=>"..").join("/")||".",b=`new URL(${P(E)}, location).pathname.slice(0, -1)`,(!H||H[0]==="/"&&H!==pr)&&($=E)),l.ssr){const A={stores:{page:Me(null),navigating:Me(null),updated:dn},constructors:await Promise.all(e.map(({node:O})=>{if(!O.component)throw new Error(`Missing +page.svelte component for route ${i.route.id}`);return O.component()})),form:x};let j={};for(let O=0;O<e.length;O+=1)j={...j,...e[O].data},A[`data_${O}`]=j;A.page={error:u,params:i.params,route:i.route,status:o,url:i.url,data:j,form:x,state:{}},Yt({base:E,assets:$});const F={context:new Map([["__request__",{page:A.page}]])};try{m=r.root.render(A,F)}finally{Qt()}for(const{node:O}of e){for(const U of O.imports)h.add(U);for(const U of O.stylesheets)f.add(U);for(const U of O.fonts)p.add(U);O.inline_styles&&!c.inline&&Object.entries(await O.inline_styles()).forEach(([U,se])=>y.set(U,se))}}else m={head:"",html:"",css:{code:"",map:null}};let w="",g=m.html;const v=new cn(r.csp,{prerender:!!s.prerendering}),k=A=>A.startsWith("/")?C+A:`${$}/${A}`,S=c.inline?c.inline?.style:Array.from(y.values()).join(`
`);if(S){const A=[];v.style_needs_nonce&&A.push(` nonce="${v.nonce}"`),v.add_style(S),w+=`
	<style${A.join("")}>${S}</style>`}for(const A of f){const j=k(A),F=['rel="stylesheet"'];if(y.has(A))F.push("disabled",'media="(max-width: 0)"');else if(a.preload({type:"css",path:j})){const O=['rel="preload"','as="style"'];_.add(`<${encodeURI(j)}>; ${O.join(";")}; nopush`)}w+=`
		<link href="${j}" ${F.join(" ")}>`}for(const A of p){const j=k(A);if(a.preload({type:"font",path:j})){const O=['rel="preload"','as="font"',`type="font/${A.slice(A.lastIndexOf(".")+1)}"`,`href="${j}"`,"crossorigin"];w+=`
		<link ${O.join(" ")}>`}}const T=`__sveltekit_${r.version_hash}`,{data:L,chunks:N}=fn(i,r,e.map(A=>A.server_data),v,T);if(l.ssr&&l.csr&&(g+=`
			${t.map(A=>Yr(A,a.filterSerializedResponseHeaders,!!s.prerendering)).join(`
			`)}`),l.csr){const A=n._.client.routes?.find(I=>I.id===i.route.id)??null;if(c.uses_env_dynamic_public&&s.prerendering&&h.add(`${ce}/env.js`),!c.inline){const I=Array.from(h,D=>k(D)).filter(D=>a.preload({type:"js",path:D}));for(const D of I)_.add(`<${encodeURI(D)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?w+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${D}">`:s.prerendering&&(w+=`
		<link rel="modulepreload" href="${D}">`)}if(n._.client.routes&&s.prerendering&&!s.prerendering.fallback){const I=At(i.url.pathname);s.prerendering.dependencies.set(I,Vt(A,i.params,new URL(I,i.url),n))}const j=[],F=c.uses_env_dynamic_public&&s.prerendering,O=[`base: ${b}`];H&&O.push(`assets: ${P(H)}`),c.uses_env_dynamic_public&&O.push(`env: ${F?"null":P(pt)}`),N&&(j.push("const deferred = new Map();"),O.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`),O.push(`resolve: ({ id, data, error }) => {
							const try_to_resolve = () => {
								if (!deferred.has(id)) {
									setTimeout(try_to_resolve, 0);
									return;
								}
								const { fulfil, reject } = deferred.get(id);
								deferred.delete(id);
								if (error) reject(error);
								else fulfil(data);
							}
							try_to_resolve();
						}`)),j.push(`${T} = {
						${O.join(`,
						`)}
					};`);const U=["element"];if(j.push("const element = document.currentScript.parentElement;"),l.ssr){const I={form:"null",error:"null"};x&&(I.form=Gr(x,i.route.id,r.hooks.transport)),u&&(I.error=B(u));const D=[`node_ids: [${e.map(({node:_e})=>_e.index).join(", ")}]`,`data: ${L}`,`form: ${I.form}`,`error: ${I.error}`];if(o!==200&&D.push(`status: ${o}`),n._.client.routes){if(A){const _e=Gt(A,i.url,n).replaceAll(`
`,`
							`);D.push(`params: ${B(i.params)}`,`server_route: ${_e}`)}}else r.embedded&&D.push(`params: ${B(i.params)}`,`route: ${P(i.route)}`);const he="	".repeat(F?7:6);U.push(`{
${he}	${D.join(`,
${he}	`)}
${he}}`)}const se=c.inline?`${c.inline.script}

					__sveltekit_${r.version_hash}.app.start(${U.join(", ")});`:c.app?`Promise.all([
						import(${P(k(c.start))}),
						import(${P(k(c.app))})
					]).then(([kit, app]) => {
						kit.start(app, ${U.join(", ")});
					});`:`import(${P(k(c.start))}).then((app) => {
						app.start(${U.join(", ")})
					});`;F?j.push(`import(${P(`${E}/${ce}/env.js`)}).then(({ env }) => {
						${T}.env = env;

						${se.replace(/\n/g,`
	`)}
					});`):j.push(se),r.service_worker&&j.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${k("service-worker.js")}');
						});
					}`);const He=`
				{
					${j.join(`

					`)}
				}
			`;v.add_script(He),g+=`
			<script${v.script_needs_nonce?` nonce="${v.nonce}"`:""}>${He}<\/script>
		`}const z=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(s.prerendering){const A=[],j=v.csp_provider.get_meta();j&&A.push(j),s.prerendering.cache&&A.push(`<meta http-equiv="cache-control" content="${s.prerendering.cache}">`),A.length>0&&(w=A.join(`
`)+w)}else{const A=v.csp_provider.get_header();A&&z.set("content-security-policy",A);const j=v.report_only_provider.get_header();j&&z.set("content-security-policy-report-only",j),_.size&&z.set("link",Array.from(_).join(", "))}w+=m.head;const fe=r.templates.app({head:w,body:g,assets:$,nonce:v.nonce,env:Kt}),pe=await a.transformPageChunk({html:fe,done:!0})||"";return N||z.set("etag",`"${qt(pe)}"`),N?new Response(new ReadableStream({async start(A){A.enqueue(tt.encode(pe+`
`));for await(const j of N)A.enqueue(tt.encode(j));A.close()},type:"bytes"}),{headers:z}):R(pe,{status:o,headers:z})}function fn(e,t,r,n,s){let l=1,o=0;const{iterator:u,push:i,done:a}=Wt();function d(c){if(typeof c?.then=="function"){const h=l++;return o+=1,c.then(f=>({data:f})).catch(async f=>({error:await q(e,t,f)})).then(async({data:f,error:p})=>{o-=1;let _;try{_=B({id:h,data:f,error:p},d)}catch{p=await q(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),f=void 0,_=B({id:h,data:f,error:p},d)}const y=n.script_needs_nonce?` nonce="${n.nonce}"`:"";i(`<script${y}>${s}.resolve(${_})<\/script>
`),o===0&&a()}),`${s}.defer(${h})`}else for(const h in t.hooks.transport){const f=t.hooks.transport[h].encode(c);if(f)return`app.decode('${h}', ${B(f,d)})`}}try{return{data:`[${r.map(h=>{if(!h)return"null";const f={type:"data",data:h.data,uses:kt(h)};return h.slash&&(f.slash=h.slash),B(f,d)}).join(",")}]`,chunks:o>0?u:null}}catch(c){throw c.path=c.path.slice(1),new Error(vt(e,c))}}class ze{data;constructor(t){this.data=t}layouts(){return this.data.slice(0,-1)}page(){return this.data.at(-1)}validate(){for(const r of this.layouts())r&&(cr(r.server,r.server_id),lr(r.universal,r.universal_id));const t=this.page();t&&(ur(t.server,t.server_id),dr(t.universal,t.universal_id))}#e(t){return this.data.reduce((r,n)=>n?.universal?.[t]??n?.server?.[t]??r,void 0)}csr(){return this.#e("csr")??!0}ssr(){return this.#e("ssr")??!0}prerender(){return this.#e("prerender")??!1}trailing_slash(){return this.#e("trailingSlash")??"never"}get_config(){let t={};for(const r of this.data)!r?.universal?.config&&!r?.server?.config||(t={...t,...r?.universal?.config,...r?.server?.config});return Object.keys(t).length?t:void 0}should_prerender_data(){return this.data.some(t=>t?.server?.load||t?.server?.trailingSlash!==void 0)}}async function Zt({event:e,options:t,manifest:r,state:n,status:s,error:l,resolve_opts:o}){if(e.request.headers.get("x-sveltekit-error"))return le(t,s,l.message);const u=[];try{const i=[],a=await r._.nodes[0](),d=new ze([a]),c=d.ssr(),h=d.csr();if(c){n.error=!0;const f=qe({event:e,state:n,node:a,parent:async()=>({})}),p=await f,_=await Dt({event:e,fetched:u,node:a,parent:async()=>({}),resolve_opts:o,server_data_promise:f,state:n,csr:h});i.push({node:a,server_data:p,data:_},{node:await r._.nodes[1](),data:null,server_data:null})}return await re({options:t,manifest:r,state:n,page_config:{ssr:c,csr:h},status:s,error:await q(e,t,l),branch:i,fetched:u,event:e,resolve_opts:o})}catch(i){return i instanceof G?ue(i.status,i.location):le(t,ee(i),(await q(e,t,i)).message)}}function pn(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}const rt=new TextEncoder;async function hn(e,t,r,n,s,l,o){if(!t.page)return new Response(void 0,{status:404});try{const u=[...t.page.layouts,t.page.leaf],i=l??u.map(()=>!0);let a=!1;const d=new URL(e.url);d.pathname=Ce(d.pathname,o);const c={...e,url:d},h=u.map((x,E)=>pn(async()=>{try{if(a)return{type:"skip"};const $=x==null?x:await n._.nodes[x]();return qe({event:c,state:s,node:$,parent:async()=>{const b={};for(let w=0;w<E;w+=1){const g=await h[w]();g&&Object.assign(b,g.data)}return b}})}catch($){throw a=!0,$}})),f=h.map(async(x,E)=>i[E]?x():{type:"skip"});let p=f.length;const _=await Promise.all(f.map((x,E)=>x.catch(async $=>{if($ instanceof G)throw $;return p=Math.min(p,E+1),{type:"error",error:await q(e,r,$),status:$ instanceof ne||$ instanceof V?$.status:void 0}}))),{data:y,chunks:m}=Xt(e,r,_);return m?new Response(new ReadableStream({async start(x){x.enqueue(rt.encode(y));for await(const E of m)x.enqueue(rt.encode(E));x.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):je(y)}catch(u){const i=u;return i instanceof G?Se(i):je(await q(e,r,i),500)}}function je(e,t=200){return R(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function Se(e){return je({type:"redirect",location:e.location})}function Xt(e,t,r){let n=1,s=0;const{iterator:l,push:o,done:u}=Wt(),i={...Object.fromEntries(Object.entries(t.hooks.transport).map(([a,d])=>[a,d.encode])),Promise:a=>{if(typeof a?.then=="function"){const d=n++;s+=1;let c="data";return a.catch(async h=>(c="error",q(e,t,h))).then(async h=>{let f;try{f=ie(h,i)}catch{const p=await q(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));c="error",f=ie(p,i)}s-=1,o(`{"type":"chunk","id":${d},"${c}":${f}}
`),s===0&&u()}),d}}};try{return{data:`{"type":"data","nodes":[${r.map(d=>d?d.type==="error"||d.type==="skip"?JSON.stringify(d):`{"type":"data","data":${ie(d.data,i)},"uses":${JSON.stringify(kt(d))}${d.slash?`,"slash":${JSON.stringify(d.slash)}`:""}}`:"null").join(",")}]}
`,chunks:s>0?l:null}}catch(a){throw a.path="data"+a.path,new Error(vt(e,a))}}const _n=10;async function yn(e,t,r,n,s,l,o){if(s.depth>_n)return R(`Not found: ${e.url.pathname}`,{status:404});if(Tt(e)){const u=await n._.nodes[t.leaf]();return Mr(e,r,u?.server)}try{const u=l.page();let i=200,a;if(Wr(e)){if(a=await Br(e,u.server),a?.type==="redirect")return ue(a.status,a.location);a?.type==="error"&&(i=ee(a.error)),a?.type==="failure"&&(i=a.status)}const d=l.prerender();if(d){if(u.server?.actions)throw new Error("Cannot prerender pages with actions")}else if(s.prerendering)return new Response(void 0,{status:204});s.prerender_default=d;const c=l.should_prerender_data(),h=Ie(e.url.pathname),f=[],p=l.ssr(),_=l.csr();if(p===!1&&!(s.prerendering&&c))return W&&a&&e.request.headers.has("x-sveltekit-action"),await re({branch:[],fetched:f,page_config:{ssr:!1,csr:_},status:i,error:null,event:e,options:r,manifest:n,state:s,resolve_opts:o});const y=[];let m=null;const x=l.data.map(($,b)=>{if(m)throw m;return Promise.resolve().then(async()=>{try{if($===u&&a?.type==="error")throw a.error;return await qe({event:e,state:s,node:$,parent:async()=>{const w={};for(let g=0;g<b;g+=1){const v=await x[g];v&&Object.assign(w,v.data)}return w}})}catch(w){throw m=w,m}})}),E=l.data.map(($,b)=>{if(m)throw m;return Promise.resolve().then(async()=>{try{return await Dt({event:e,fetched:f,node:$,parent:async()=>{const w={};for(let g=0;g<b;g+=1)Object.assign(w,await E[g]);return w},resolve_opts:o,server_data_promise:x[b],state:s,csr:_})}catch(w){throw m=w,m}})});for(const $ of x)$.catch(()=>{});for(const $ of E)$.catch(()=>{});for(let $=0;$<l.data.length;$+=1){const b=l.data[$];if(b)try{const w=await x[$],g=await E[$];y.push({node:b,server_data:w,data:g})}catch(w){const g=w;if(g instanceof G){if(s.prerendering&&c){const S=JSON.stringify({type:"redirect",location:g.location});s.prerendering.dependencies.set(h,{response:R(S),body:S})}return ue(g.status,g.location)}const v=ee(g),k=await q(e,r,g);for(;$--;)if(t.errors[$]){const S=t.errors[$],T=await n._.nodes[S]();let L=$;for(;!y[L];)L-=1;const N=Je(y.slice(0,L+1)),z=new ze(N.map(fe=>fe.node));return await re({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{ssr:z.ssr(),csr:z.csr()},status:v,error:k,branch:N.concat({node:T,data:null,server_data:null}),fetched:f})}return le(r,v,k.message)}else y.push(null)}if(s.prerendering&&c){let{data:$,chunks:b}=Xt(e,r,y.map(w=>w?.server_data));if(b)for await(const w of b)$+=w;s.prerendering.dependencies.set(h,{response:R($),body:$})}return await re({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{csr:_,ssr:p},status:i,error:null,branch:p===!1?[]:Je(y),action_result:a,fetched:f})}catch(u){return await Zt({event:e,options:r,manifest:n,state:s,status:500,error:u,resolve_opts:o})}}var ae={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var nt;function mn(){if(nt)return ae;nt=1,ae.parse=r,ae.serialize=n;var e=Object.prototype.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(i,a){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var d={},c=a||{},h=c.decode||s,f=0;f<i.length;){var p=i.indexOf("=",f);if(p===-1)break;var _=i.indexOf(";",f);if(_===-1)_=i.length;else if(_<p){f=i.lastIndexOf(";",p-1)+1;continue}var y=i.slice(f,p).trim();if(d[y]===void 0){var m=i.slice(p+1,_).trim();m.charCodeAt(0)===34&&(m=m.slice(1,-1)),d[y]=u(m,h)}f=_+1}return d}function n(i,a,d){var c=d||{},h=c.encode||l;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!t.test(i))throw new TypeError("argument name is invalid");var f=h(a);if(f&&!t.test(f))throw new TypeError("argument val is invalid");var p=i+"="+f;if(c.maxAge!=null){var _=c.maxAge-0;if(isNaN(_)||!isFinite(_))throw new TypeError("option maxAge is invalid");p+="; Max-Age="+Math.floor(_)}if(c.domain){if(!t.test(c.domain))throw new TypeError("option domain is invalid");p+="; Domain="+c.domain}if(c.path){if(!t.test(c.path))throw new TypeError("option path is invalid");p+="; Path="+c.path}if(c.expires){var y=c.expires;if(!o(y)||isNaN(y.valueOf()))throw new TypeError("option expires is invalid");p+="; Expires="+y.toUTCString()}if(c.httpOnly&&(p+="; HttpOnly"),c.secure&&(p+="; Secure"),c.partitioned&&(p+="; Partitioned"),c.priority){var m=typeof c.priority=="string"?c.priority.toLowerCase():c.priority;switch(m){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(c.sameSite){var x=typeof c.sameSite=="string"?c.sameSite.toLowerCase():c.sameSite;switch(x){case!0:p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"strict":p+="; SameSite=Strict";break;case"none":p+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return p}function s(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function l(i){return encodeURIComponent(i)}function o(i){return e.call(i)==="[object Date]"||i instanceof Date}function u(i,a){try{return a(i)}catch{return i}}return ae}var Z=mn();const wn=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function ge(e){if(e?.path===void 0)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function gn(e,t){const r=e.headers.get("cookie")??"",n=Z.parse(r,{decode:h=>h});let s;const l={},o={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},u={get(h,f){const p=l[h];return p&&be(t.hostname,p.options.domain)&&$e(t.pathname,p.options.path)?p.value:Z.parse(r,{decode:f?.decode})[h]},getAll(h){const f=Z.parse(r,{decode:h?.decode});for(const p of Object.values(l))be(t.hostname,p.options.domain)&&$e(t.pathname,p.options.path)&&(f[p.name]=p.value);return Object.entries(f).map(([p,_])=>({name:p,value:_}))},set(h,f,p){const _=h.match(wn);_&&console.warn(`The cookie name "${h}" will be invalid in SvelteKit 3.0 as it contains ${_.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),ge(p),d(h,f,{...o,...p})},delete(h,f){ge(f),u.set(h,"",{...f,maxAge:0})},serialize(h,f,p){ge(p);let _=p.path;if(!p.domain||p.domain===t.hostname){if(!s)throw new Error("Cannot serialize cookies until after the route is determined");_=We(s,_)}return Z.serialize(h,f,{...o,...p,path:_})}};function i(h,f){const p={...n};for(const _ in l){const y=l[_];if(!be(h.hostname,y.options.domain)||!$e(h.pathname,y.options.path))continue;const m=y.options.encode||encodeURIComponent;p[y.name]=m(y.value)}if(f){const _=Z.parse(f,{decode:y=>y});for(const y in _)p[y]=_[y]}return Object.entries(p).map(([_,y])=>`${_}=${y}`).join("; ")}const a=[];function d(h,f,p){if(!s){a.push(()=>d(h,f,p));return}let _=p.path;(!p.domain||p.domain===t.hostname)&&(_=We(s,_)),l[h]={name:h,value:f,options:{...p,path:_}}}function c(h){s=Ce(t.pathname,h),a.forEach(f=>f())}return{cookies:u,new_cookies:l,get_cookie_header:i,set_internal:d,set_trailing_slash:c}}function be(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function $e(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function st(e,t){for(const r of t){const{name:n,value:s,options:l}=r;if(e.append("set-cookie",Z.serialize(n,s,l)),l.path.endsWith(".html")){const o=Ie(l.path);e.append("set-cookie",Z.serialize(n,s,{...l,path:o}))}}}var X={exports:{}},at;function bn(){if(at)return X.exports;at=1;var e={decodeValues:!0,map:!1,silent:!1};function t(o){return typeof o=="string"&&!!o.trim()}function r(o,u){var i=o.split(";").filter(t),a=i.shift(),d=n(a),c=d.name,h=d.value;u=u?Object.assign({},e,u):e;try{h=u.decodeValues?decodeURIComponent(h):h}catch(p){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+h+"'. Set options.decodeValues to false to disable this feature.",p)}var f={name:c,value:h};return i.forEach(function(p){var _=p.split("="),y=_.shift().trimLeft().toLowerCase(),m=_.join("=");y==="expires"?f.expires=new Date(m):y==="max-age"?f.maxAge=parseInt(m,10):y==="secure"?f.secure=!0:y==="httponly"?f.httpOnly=!0:y==="samesite"?f.sameSite=m:y==="partitioned"?f.partitioned=!0:f[y]=m}),f}function n(o){var u="",i="",a=o.split("=");return a.length>1?(u=a.shift(),i=a.join("=")):i=o,{name:u,value:i}}function s(o,u){if(u=u?Object.assign({},e,u):e,!o)return u.map?{}:[];if(o.headers)if(typeof o.headers.getSetCookie=="function")o=o.headers.getSetCookie();else if(o.headers["set-cookie"])o=o.headers["set-cookie"];else{var i=o.headers[Object.keys(o.headers).find(function(d){return d.toLowerCase()==="set-cookie"})];!i&&o.headers.cookie&&!u.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),o=i}if(Array.isArray(o)||(o=[o]),u.map){var a={};return o.filter(t).reduce(function(d,c){var h=r(c,u);return d[h.name]=h,d},a)}else return o.filter(t).map(function(d){return r(d,u)})}function l(o){if(Array.isArray(o))return o;if(typeof o!="string")return[];var u=[],i=0,a,d,c,h,f;function p(){for(;i<o.length&&/\s/.test(o.charAt(i));)i+=1;return i<o.length}function _(){return d=o.charAt(i),d!=="="&&d!==";"&&d!==","}for(;i<o.length;){for(a=i,f=!1;p();)if(d=o.charAt(i),d===","){for(c=i,i+=1,p(),h=i;i<o.length&&_();)i+=1;i<o.length&&o.charAt(i)==="="?(f=!0,i=h,u.push(o.substring(a,c)),a=i):i=c+1}else i+=1;(!f||i>=o.length)&&u.push(o.substring(a,o.length))}return u}return X.exports=s,X.exports.parse=s,X.exports.parseString=r,X.exports.splitCookiesString=l,X.exports}var ot=bn();function $n({event:e,options:t,manifest:r,state:n,get_cookie_header:s,set_internal:l}){const o=async(u,i)=>{const a=it(u,i,e.url);let d=(u instanceof Request?u.mode:i?.mode)??"cors",c=(u instanceof Request?u.credentials:i?.credentials)??"same-origin";return t.hooks.handleFetch({event:e,request:a,fetch:async(h,f)=>{const p=it(h,f,e.url),_=new URL(p.url);if(p.headers.has("origin")||p.headers.set("origin",e.url.origin),h!==a&&(d=(h instanceof Request?h.mode:f?.mode)??"cors",c=(h instanceof Request?h.credentials:f?.credentials)??"same-origin"),(p.method==="GET"||p.method==="HEAD")&&(d==="no-cors"&&_.origin!==e.url.origin||_.origin===e.url.origin)&&p.headers.delete("origin"),_.origin!==e.url.origin){if(`.${_.hostname}`.endsWith(`.${e.url.hostname}`)&&c!=="omit"){const v=s(_,p.headers.get("cookie"));v&&p.headers.set("cookie",v)}return fetch(p)}const y=H||C,m=decodeURIComponent(_.pathname),x=(m.startsWith(y)?m.slice(y.length):m).slice(1),E=`${x}/index.html`,$=r.assets.has(x)||x in r._.server_assets,b=r.assets.has(E)||E in r._.server_assets;if($||b){const v=$?x:E;if(n.read){const k=$?r.mimeTypes[x.slice(x.lastIndexOf("."))]:"text/html";return new Response(n.read(v),{headers:k?{"content-type":k}:{}})}else if(Le&&v in r._.server_assets){const k=r._.server_assets[v],S=r.mimeTypes[v.slice(v.lastIndexOf("."))];return new Response(Le(v),{headers:{"Content-Length":""+k,"Content-Type":S}})}return await fetch(p)}if(xt(r,C+m))return await fetch(p);if(c!=="omit"){const v=s(_,p.headers.get("cookie"));v&&p.headers.set("cookie",v);const k=e.request.headers.get("authorization");k&&!p.headers.has("authorization")&&p.headers.set("authorization",k)}p.headers.has("accept")||p.headers.set("accept","*/*"),p.headers.has("accept-language")||p.headers.set("accept-language",e.request.headers.get("accept-language"));const w=await vn(p,t,r,n),g=w.headers.get("set-cookie");if(g)for(const v of ot.splitCookiesString(g)){const{name:k,value:S,...T}=ot.parseString(v,{decodeValues:!1}),L=T.path??(_.pathname.split("/").slice(0,-1).join("/")||"/");l(k,S,{path:L,encode:N=>N,...T})}return w}})};return(u,i)=>{const a=o(u,i);return a.catch(()=>{}),a}}function it(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}async function vn(e,t,r,n){if(e.signal){if(e.signal.aborted)throw new DOMException("The operation was aborted.","AbortError");let s=()=>{};const l=new Promise((u,i)=>{const a=()=>{i(new DOMException("The operation was aborted.","AbortError"))};e.signal.addEventListener("abort",a,{once:!0}),s=()=>e.signal.removeEventListener("abort",a)}),o=await Promise.race([Oe(e,t,r,{...n,depth:n.depth+1}),l]);return s(),o}else return await Oe(e,t,r,{...n,depth:n.depth+1})}let ct,ve,ke;function kn(e){return ct??=`export const env=${JSON.stringify(pt)}`,ve??=`W/${Date.now()}`,ke??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:ve}),e.headers.get("if-none-match")===ve?new Response(void 0,{status:304,headers:ke}):new Response(ct,{headers:ke})}const lt=({html:e})=>e,ut=()=>!1,dt=({type:e})=>e==="js"||e==="css",xn=new Set(["GET","HEAD","POST"]),An=new Set(["GET","HEAD","OPTIONS"]);async function Oe(e,t,r,n){const s=new URL(e.url);if(t.csrf_check_origin&&mt(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&e.headers.get("origin")!==s.origin){const w=new ne(403,`Cross-site ${e.method} form submissions are forbidden`);return e.headers.get("accept")==="application/json"?Re(w.body,{status:w.status}):R(w.body.message,{status:w.status})}if(t.hash_routing&&s.pathname!==C+"/"&&s.pathname!=="/[fallback]")return R("Not found",{status:404});let l;const o=Ar(s.pathname),u=kr(s.pathname);o?s.pathname=Er(s.pathname):u&&(s.pathname=xr(s.pathname)+(s.searchParams.get(Ke)==="1"?"/":"")||"/",s.searchParams.delete(Ke),l=s.searchParams.get(Xe)?.split("").map(b=>b==="1"),s.searchParams.delete(Xe));const i={},{cookies:a,new_cookies:d,get_cookie_header:c,set_internal:h,set_trailing_slash:f}=gn(e,s),p={cookies:a,fetch:null,getClientAddress:n.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-auto does not specify getClientAddress. Please raise an issue")}),locals:{},params:{},platform:n.platform,request:e,route:{id:null},setHeaders:b=>{for(const w in b){const g=w.toLowerCase(),v=b[w];if(g==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(g in i)throw new Error(`"${w}" header is already set`);i[g]=v,n.prerendering&&g==="cache-control"&&(n.prerendering.cache=v)}},url:s,isDataRequest:u,isSubRequest:n.depth>0};p.fetch=$n({event:p,options:t,manifest:r,state:n,get_cookie_header:c,set_internal:h}),n.emulator?.platform&&(p.platform=await n.emulator.platform({config:{},prerender:!!n.prerendering?.fallback}));let _;const y=n.prerendering?.inside_reroute;try{n.prerendering&&(n.prerendering.inside_reroute=!0),_=await t.hooks.reroute({url:new URL(s),fetch:p.fetch})??s.pathname}catch{return R("Internal Server Error",{status:500})}finally{n.prerendering&&(n.prerendering.inside_reroute=y)}try{_=fr(_)}catch{return R("Malformed URI",{status:400})}if(_!==s.pathname&&!n.prerendering?.fallback&&xt(r,_)){const b=new URL(e.url);b.pathname=u?Ie(_):o?At(_):_;const w=await fetch(b,e),g=new Headers(w.headers);return g.has("content-encoding")&&(g.delete("content-encoding"),g.delete("content-length")),new Response(w.body,{headers:g,status:w.status,statusText:w.statusText})}let m=null;if(C&&!n.prerendering?.fallback){if(!_.startsWith(C))return R("Not found",{status:404});_=_.slice(C.length)||"/"}if(o)return ln(_,new URL(e.url),r);if(_===`/${ce}/env.js`)return kn(e);if(_.startsWith(`/${ce}`)){const b=new Headers;return b.set("cache-control","public, max-age=0, must-revalidate"),R("Not found",{status:404,headers:b})}if(!n.prerendering?.fallback){const b=await r._.matchers();for(const w of r._.routes){const g=w.pattern.exec(_);if(!g)continue;const v=Bt(g,w.params,b);if(v){m=w,p.route={id:m.id},p.params=_t(v);break}}}let x={transformPageChunk:lt,filterSerializedResponseHeaders:ut,preload:dt},E="never";try{const b=m?.page?new ze(await En(m.page,r)):void 0;if(m){if(s.pathname===C||s.pathname===C+"/"?E="always":b?E=b.trailing_slash():m.endpoint&&(E=(await m.endpoint()).trailingSlash??"never"),!u){const g=Ce(s.pathname,E);if(g!==s.pathname&&!n.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(g.startsWith("//")?s.origin+g:g)+(s.search==="?"?"":s.search)}})}if(n.before_handle||n.emulator?.platform){let g={},v=!1;if(m.endpoint){const k=await m.endpoint();g=k.config??g,v=k.prerender??v}else b&&(g=b.get_config()??g,v=b.prerender());n.before_handle&&n.before_handle(p,g,v),n.emulator?.platform&&(p.platform=await n.emulator.platform({config:g,prerender:v}))}}f(E),n.prerendering&&!n.prerendering.fallback&&!n.prerendering.inside_reroute&&ht(s);const w=await Q(p,()=>t.hooks.handle({event:p,resolve:(g,v)=>Q(null,()=>$(g,b,v).then(k=>{for(const S in i){const T=i[S];k.headers.set(S,T)}return st(k.headers,Object.values(d)),n.prerendering&&g.route.id!==null&&k.headers.set("x-sveltekit-routeid",encodeURI(g.route.id)),k}))}));if(w.status===200&&w.headers.has("etag")){let g=e.headers.get("if-none-match");g?.startsWith('W/"')&&(g=g.substring(2));const v=w.headers.get("etag");if(g===v){const k=new Headers({etag:v});for(const S of["cache-control","content-location","date","expires","vary","set-cookie"]){const T=w.headers.get(S);T&&k.set(S,T)}return new Response(void 0,{status:304,headers:k})}}if(u&&w.status>=300&&w.status<=308){const g=w.headers.get("location");if(g)return Se(new G(w.status,g))}return w}catch(b){if(b instanceof G){const w=u?Se(b):m?.page&&Tt(p)?Pt(b):ue(b.status,b.location);return st(w.headers,Object.values(d)),w}return await Ge(p,t,b)}async function $(b,w,g){try{if(g&&(x={transformPageChunk:g.transformPageChunk||lt,filterSerializedResponseHeaders:g.filterSerializedResponseHeaders||ut,preload:g.preload||dt}),t.hash_routing||n.prerendering?.fallback)return await re({event:b,options:t,manifest:r,state:n,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:x});if(m){const v=b.request.method;let k;if(u)k=await hn(b,m,t,r,n,l,E);else if(m.endpoint&&(!m.page||vr(b)))k=await $r(b,await m.endpoint(),n);else if(m.page)if(w)if(xn.has(v))k=await yn(b,m.page,t,r,n,w,x);else{const S=new Set(An);if((await r._.nodes[m.page.leaf]())?.server?.actions&&S.add("POST"),v==="OPTIONS")k=new Response(null,{status:204,headers:{allow:Array.from(S.values()).join(", ")}});else{const L=[...S].reduce((N,z)=>(N[z]=!0,N),{});k=$t(L,v)}}else throw new Error("page_nodes not found. This should never happen");else throw new Error("Route is neither page nor endpoint. This should never happen");if(e.method==="GET"&&m.page&&m.endpoint){const S=k.headers.get("vary")?.split(",")?.map(T=>T.trim().toLowerCase());S?.includes("accept")||S?.includes("*")||(k=new Response(k.body,{status:k.status,statusText:k.statusText,headers:new Headers(k.headers)}),k.headers.append("Vary","Accept"))}return k}if(n.error&&b.isSubRequest){const v=new Headers(e.headers);return v.set("x-sveltekit-error","true"),await fetch(e,{headers:v})}return n.error?R("Internal Server Error",{status:500}):n.depth===0?(W&&b.url.pathname,await Zt({event:b,options:t,manifest:r,state:n,status:404,error:new V(404,"Not Found",`Not found: ${b.url.pathname}`),resolve_opts:x})):n.prerendering?R("not found",{status:404}):await fetch(e)}catch(v){return await Ge(b,t,v)}finally{b.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},b.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function En(e,t){return Promise.all([...e.layouts.map(r=>r==null?r:t._.nodes[r]()),t._.nodes[e.leaf]()])}function jn(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(r)&&(t===""||!n.startsWith(t))))}function Sn(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)&&(r===""||!n.startsWith(r))))}const ft={get({type:e},t){throw new Error(`Cannot read values from $env/dynamic/${e} while prerendering (attempted to read env.${t.toString()}). Use $env/static/${e} instead`)}};let On;class In{#e;#t;constructor(t){this.#e=er,this.#t=t}async init({env:t,read:r}){const n={public_prefix:this.#e.env_public_prefix,private_prefix:this.#e.env_private_prefix},s=jn(t,n),l=Sn(t,n);rr(Fe?new Proxy({type:"private"},ft):s),nr(Fe?new Proxy({type:"public"},ft):l),sr(l),r&&ar(u=>{const i=r(u);return i instanceof ReadableStream?i:new ReadableStream({async start(a){try{const d=await Promise.resolve(i);if(!d){a.close();return}const c=d.getReader();for(;;){const{done:h,value:f}=await c.read();if(h)break;a.enqueue(f)}a.close()}catch(d){a.error(d)}}})}),await(On??=(async()=>{try{const o=await tr();this.#e.hooks={handle:o.handle||(({event:u,resolve:i})=>i(u)),handleError:o.handleError||(({status:u,error:i})=>console.error(u===404&&i?.message||i)),handleFetch:o.handleFetch||(({request:u,fetch:i})=>i(u)),reroute:o.reroute||(()=>{}),transport:o.transport||{}},o.transport&&Object.fromEntries(Object.entries(o.transport).map(([u,i])=>[u,i.decode])),o.init&&await o.init()}catch(o){throw o}})())}async respond(t,r){return Oe(t,this.#e,this.#t,{...r,error:!1,depth:0})}}export{In as Server};
